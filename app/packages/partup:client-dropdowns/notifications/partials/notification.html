<template name="Notification">

    <!-- supporter joined notification -->
    {{#if partupEqualsExactly notification.type 'partups_supporters_added' }}
        <a href="{{#if notification.type_data.update._id}} {{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}{{else}}{{pathFor route='partup' slug=notification.type_data.partup.slug}}{{/if}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.supporter.image }}');"
                data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.supporter._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_supporters_added' supporter=notification.type_data.supporter.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name }}</time>
            </article>
        </a>
    {{/if}}

    <!-- invite for activity notification -->
    {{#if partupEqualsExactly notification.type 'partup_activities_invited' }}
        <a href="{{#if notification.type_data.update._id}} {{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}{{else}}{{pathFor route='partup-activities' slug=notification.type_data.partup.slug}}{{/if}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.inviter.image }}');"
                data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.inviter._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partup_activities_invited' inviter=notification.type_data.inviter.name activity=notification.type_data.activity.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- invite for partup notification -->
    {{#if partupEqualsExactly notification.type 'invite_upper_to_partup' }}
        <a href="{{pathFor route='partup' slug=notification.type_data.partup.slug}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.inviter.image }}');"
                data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.inviter._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-invite_upper_to_partup' inviter=notification.type_data.inviter.name partup=notification.type_data.partup.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- contribution accepted notification -->
    {{#if partupEqualsExactly notification.type 'partups_contributions_accepted' }}
        <a href="{{#if notification.type_data.update._id}} {{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}{{else}}{{pathFor route='partup' slug=notification.type_data.partup.slug}}{{/if}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.accepter.image }}');"
                data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.accepter._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_contributions_accepted' accepter=notification.type_data.accepter.name activity=notification.type_data.activity.name}}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- contribution rejected notification -->
    {{#if partupEqualsExactly notification.type 'partups_contributions_rejected' }}
        <a href="{{#if notification.type_data.update._id}} {{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}{{else}}{{pathFor route='partup' slug=notification.type_data.partup.slug}}{{/if}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.rejecter.image }}');"
                data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.rejecter._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_contributions_rejected' rejecter=notification.type_data.rejecter.name activity=notification.type_data.activity.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- invited to network notification -->
    {{#if partupEqualsExactly notification.type 'partups_networks_invited' }}
        <a href="{{pathFor route='network-detail' slug=notification.type_data.network.slug}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.inviter.image }}');"
                data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.inviter._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_networks_invited' inviter=notification.type_data.inviter.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.network.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- accepted to network notification -->
    {{#if partupEqualsExactly notification.type 'partups_networks_accepted' }}
        <a href="{{pathFor route='network-detail' slug=notification.type_data.network.slug}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.network.image }}');">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_networks_accepted' network=notification.type_data.network.name }}</p>
                <time>{{ partupDateNotification notification.created_at }}</time>
            </article>
        </a>
    {{/if}}

    <!-- added to pending_upper list and waiting for admin approval -->
    {{#if partupEqualsExactly notification.type 'partups_networks_new_pending_upper' }}
        <a href="{{pathFor route='network-settings-requests' slug=notification.type_data.network.slug}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.pending_upper.image }}');">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_networks_new_pending_upper' network=notification.type_data.network.name pending_upper=notification.type_data.pending_upper.name }}</p>
                <time>{{ partupDateNotification notification.created_at }}</time>
            </article>
        </a>
    {{/if}}

    <!-- contribution rating notification -->
    {{#if partupEqualsExactly notification.type 'contributions_ratings_inserted' }}
        <a href="{{#if notification.type_data.update._id}} {{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}{{else}}{{pathFor route='partup-activities' slug=notification.type_data.partup.slug}}{{/if}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.rater.image }}');"
                data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.rater._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-contributions_ratings_inserted' rater=notification.type_data.rater.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- comment on update notification -->
    {{#if partupEqualsExactly notification.type 'updates_first_comment' }}
        <a href="{{#if notification.type_data.update._id}} {{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}{{else}}{{pathFor route='partup' slug=notification.type_data.partup.slug}}{{/if}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.commenter.image }}');"
                data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.commenter._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-updates_first_comment' commenter=notification.type_data.commenter.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- new message in partup notification -->
    {{#if partupEqualsExactly notification.type 'partups_messages_inserted' }}
        <a href="{{#if notification.type_data.update._id}} {{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}{{else}}{{pathFor route='partup' slug=notification.type_data.partup.slug}}{{/if}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.creator.image }}');"
                data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.creator._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_messages_inserted' creator=notification.type_data.creator.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- new activity in partup notification -->
    {{#if partupEqualsExactly notification.type 'partups_activities_inserted' }}
        <a href="{{#if notification.type_data.update._id}} {{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}{{else}}{{pathFor route='partup-activities' slug=notification.type_data.partup.slug}}{{/if}}">
            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=notification.type_data.creator.image }}');"
            data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.creator._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_activities_inserted' creator=notification.type_data.creator.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- new contribution in partup by partner notification -->
    {{#if partupEqualsExactly notification.type 'partups_contributions_inserted' }}
        <a href="{{#if notification.type_data.update._id}} {{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}{{else}}{{pathFor route='partup-activities' slug=notification.type_data.partup.slug}}{{/if}}">
            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=notification.type_data.creator.image }}');"
            data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.creator._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_contributions_inserted' creator=notification.type_data.creator.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- new contribution in partup by supporter notification -->
    {{#if partupEqualsExactly notification.type 'partups_contributions_proposed' }}
        <a href="{{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id }}">
            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=notification.type_data.creator.image }}');"
            data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.creator._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_contributions_proposed' creator=notification.type_data.creator.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- reminder to rate contributions in partup notification -->
    {{#if partupEqualsExactly notification.type 'partups_ratings_reminder' }}
        <a href="{{pathFor route='partup-activities' slug=notification.type_data.partup.slug}}">
            <figure class="pu-avatar pu-avatar-plain pu-avatar-system">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_ratings_reminder' partup=notification.type_data.partup.name }}</p>
                <time>{{ partupDateNotification notification.created_at }}</time>
            </article>
        </a>
    {{/if}}

    <!-- user got mentioned in a partup -->
    {{#if partupEqualsExactly notification.type 'partups_user_mentioned' }}
        <a href="{{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}">
            <figure class="pu-avatar pu-avatar-plain" style="background-image: url('{{ partupImageUrl id=notification.type_data.mentioning_upper.image }}');"
            data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.mentioning_upper._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_user_mentioned' partup=notification.type_data.partup.name mentioning_upper=notification.type_data.mentioning_upper.name }}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- partup is created in user's network -->
    {{#if partupEqualsExactly notification.type 'partup_created_in_network' }}
        <a href="{{pathFor route='partup' slug=notification.type_data.partup.slug}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.creator.image }}');"
                data-hovercontainer="HoverContainer_upper" data-hovercontainer-context="{{ notification.type_data.creator._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partup_created_in_network' partup=notification.type_data.partup.name network=notification.type_data.network.name creator=notification.type_data.creator.name }}</p>
                <time>{{ partupDateNotification notification.created_at }}</time>
            </article>
        </a>
    {{/if}}

    <!-- new comment in conversation the upper is involved in -->
    {{#if partupEqualsExactly notification.type 'partups_new_comment_in_involved_conversation' }}
        <a href="{{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.commenter.image }}');"
                data-usercard="{{ notification.type_data.commenter._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_new_comment_in_involved_conversation' commenter=notification.type_data.commenter.name}}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- new member in tribe -->
    {{#if partupEqualsExactly notification.type 'partups_networks_new_upper' }}
        <a href="{{pathFor route='network-uppers' slug=notification.type_data.network.slug}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.upper.image }}');"
                data-usercard="{{ notification.type_data.upper._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_networks_new_upper' upper=notification.type_data.upper.name network=notification.type_data.network.name}}</p>
                <time>{{ partupDateNotification notification.created_at }}</time>
            </article>
        </a>
    {{/if}}

    <!-- member has left tribe -->
    {{#if partupEqualsExactly notification.type 'partups_networks_upper_left' }}
        <a href="{{pathFor route='network-detail' slug=notification.type_data.network.slug}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.upper.image }}');"
                data-usercard="{{ notification.type_data.upper._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-partups_networks_upper_left' upper=notification.type_data.upper.name network=notification.type_data.network.name}}</p>
                <time>{{ partupDateNotification notification.created_at }}</time>
            </article>
        </a>
    {{/if}}

    <!-- grouped conversation notification -->
    {{#if partupEqualsExactly notification.type 'multiple_comments_in_conversation_since_visit' }}
        <a href="{{pathFor route='partup-update' slug=notification.type_data.partup.slug update_id=notification.type_data.update._id}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.latest_upper.image }}');"
                data-usercard="{{ notification.type_data.latest_upper._id }}">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-multiple_comments_in_conversation_since_visit' upper=notification.type_data.latest_upper.name others_count=notification.type_data.others_count}}</p>
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- grouped partup notification -->
    {{#if partupEqualsExactly notification.type 'partups_multiple_updates_since_visit' }}
        <a href="{{pathFor route='partup' slug=notification.type_data.partup.slug}}">
            <figure class="pu-avatar pu-avatar-plain"
                style="background-image: url('{{ partupImageUrl id=notification.type_data.latest_upper.image }}');"
                data-usercard="{{ notification.type_data.latest_upper._id }}">
            </figure>
            <article>
                {{#if partupEqualsExactly notification.type_data.others_count 0}}
                    <p>{{_ 'dropdown-notification-partups_multiple_updates_since_visit_single_person' upper=notification.type_data.latest_upper.name}}</p>
                {{else}}
                    <p>{{_ 'dropdown-notification-partups_multiple_updates_since_visit' upper=notification.type_data.latest_upper.name others_count=notification.type_data.others_count}}</p>
                {{/if}}
                <time>{{ partupDateNotification notification.created_at }} {{_ 'dropdown-notification-location' location=notification.type_data.partup.name}}</time>
            </article>
        </a>
    {{/if}}

    <!-- grouped network notification -->
    {{#if partupEqualsExactly notification.type 'networks_multiple_new_uppers_since_visit' }}
        <a href="{{pathFor route='network-uppers' slug=notification.type_data.network.slug}}">
            <figure class="pu-avatar pu-avatar-plain"
                    style="background-image: url('{{ partupImageUrl id=notification.type_data.network.image }}');">
            </figure>
            <article>
                <p>{{_ 'dropdown-notification-networks_multiple_new_uppers_since_visit' upper=notification.type_data.latest_upper.name others_count=notification.type_data.others_count network=notification.type_data.network.name}}</p>
                <time>{{ partupDateNotification notification.created_at }}</time>
            </article>
        </a>
    {{/if}}

</template>
